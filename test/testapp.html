<!DOCTYPE html>
<html>
<head>
    <script src="../meteor-blaze-client.js"></script>

    <script type="html/template">
        <template name="test">
            <div>
                foo = {{foo}}
            </div>
            <div>
                {{> test2 bar="test bar"}}
            </div>
        </template>
    </script>

    <script>
        MBC.onTemplatesLoaded(function() {
            Template.test2.showBar = function() {
                return '==='+this.bar+'===';
            }

            Template.test.foo = function () {
                return Session.get('testing');
            };

            setTimeout(function () {
                Session.set('testing', 'THIS IS FOO AGAIN');
            }, 2000);

            MBC.renderTemplate('test', '#tempTemplate');

        });

        MBC.loadTemplate('templates/test2.html', function() {
            MBC.templatesLoaded();
        });

        $('script[type="html/template"]').each(function (idx, el) {
            MBC.scanHtml(($(el).html()));
        });


    </script>


    <title>test</title>
</head>
<body>
<h1>Body</h1>

<div id="tempTemplate"></div>

</body>
</html>
