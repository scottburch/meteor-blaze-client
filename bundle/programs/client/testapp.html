
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="packages/underscore.js"></script>
    <script type="text/javascript" src="packages/meteor.js"></script>
    <script type="text/javascript" src="packages/json.js"></script>
    <script type="text/javascript" src="packages/ejson.js"></script>
    <script type="text/javascript" src="packages/logging.js"></script>
    <script type="text/javascript" src="packages/reload.js"></script>
    <script type="text/javascript" src="packages/deps.js"></script>
    <script type="text/javascript" src="packages/random.js"></script>
    <script type="text/javascript" src="packages/retry.js"></script>
    <script type="text/javascript" src="packages/check.js"></script>
    <script type="text/javascript" src="packages/ordered-dict.js"></script>
    <script type="text/javascript" src="packages/geojson-utils.js"></script>
    <script type="text/javascript" src="packages/minimongo.js"></script>
    <script type="text/javascript" src="packages/application-configuration.js"></script>
    <script type="text/javascript" src="packages/standard-app-packages.js"></script>
    <script type="text/javascript" src="packages/webapp.js"></script>
    <script type="text/javascript" src="packages/reactive-dict.js"></script>
    <script type="text/javascript" src="packages/session.js"></script>
    <script type="text/javascript" src="packages/jquery.js"></script>
    <script type="text/javascript" src="packages/observe-sequence.js"></script>
    <script type="text/javascript" src="packages/htmljs.js"></script>
    <script type="text/javascript" src="packages/ui.js"></script>
    <script type="text/javascript" src="packages/spacebars.js"></script>
    <script type="text/javascript" src="packages/templating.js"></script>
    <script type="text/javascript" src="packages/global-imports.js"></script>


    <script src="../../../vendor/meteor/packages/html-tools/parse.js"></script>
    <script src="../../../vendor/meteor/packages/html-tools/scanner.js"></script>
    <script src="../../../vendor/meteor/packages/html-tools/charref.js"></script>

    <script src="../../../vendor/meteor/packages/html-tools/tokenize.js"></script>
    <script src="../../../vendor/meteor/packages/html-tools/parse.js"></script>
    <script src="../../../vendor/meteor/packages/html-tools/exports.js"></script>

    <script src="../../../vendor/meteor/packages/templating/plugin/html_scanner.js"></script>


    <script src="../../../vendor/meteor/packages/spacebars-compiler/templatetag.js"></script>
    <script src="../../../vendor/meteor/packages/spacebars-compiler/tojs.js"></script>
    <script src="../../../vendor/meteor/packages/spacebars-compiler/tokens.js"></script>
    <script src="../../../vendor/meteor/packages/spacebars-compiler/spacebars-compiler.js"></script>

    <script type="html/template">
        <template name="test">
            foo = {{foo}}
        </template>
    </script>

    <script>
        Crater = {
            renderTemplate: function(templateName, elOrSelector) {
                var el = _.isString(elOrSelector) ? $(elOrSelector).get(0) : elOrSelector;
                el && UI.DomRange.insert(UI.render(Template[templateName]).dom, el);
            }
        }
    </script>

    <script>
        var bodyTemplate = '';
        $('script[type="html/template"]').each(function(idx, el) {
            el = $(el);
            var r = html_scanner.scan(el.html());
            r.js && eval(r.js);
        });

        Template.test.foo = function() {
            return Session.get('testing');
      };

        setTimeout(function() {
            Session.set('testing', 'THIS IS FOO AGAIN');
        },2000);

    </script>


    <title>test</title>
</head>
<body>
<h1>Body</h1>
    <div id="tempTemplate">

    </div>

    <script>
        Crater.renderTemplate('test', '#tempTemplate');
    </script>
</body>
</html>
